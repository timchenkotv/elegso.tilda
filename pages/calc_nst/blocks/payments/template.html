<!-- =======================================================================
БЛОК: Ввод оплат
Смысл и возможности:
  • Ввод одной строки: Дата, Оплачено (два знака, разделение тысяч), Комментарий.
  • Таблица: автонумерация, inline-редактирование, дублирование (+1 месяц), удаление.
  • Сортировка по дате (↑/↓), сохраняется текущий порядок после любых операций.
  • «Итого» — суммирует колонку «Оплачено».
  • Кнопка «Данные»: экспорт/импорт
        — Excel (CSV, UTF-8 + BOM, разделитель ;, дата dd.mm.yyyy),
        — XML (простой/безопасный),
        — Текст (JSON Lines, по записи на строку).
Особенности:
  • Фон блока: #e5dcd0; аккуратные границы таблицы #bcae99; заголовок #efe6db.
  • Мобильные отступы слева/справа 14px; расширены колонки «Дата» и «Комментарий».
  • Все теги валидны; логика в IIFE; уникальные ID (префикс pay_).
======================================================================= -->
<div class="elegso-pay" style="max-width:920px; margin:120px auto 100px auto; position:relative; z-index:5; background:#e5dcd0;" data-locale="ru-RU">
  <!-- ===== Заголовок блока =============================================== -->
  <h3 style="text-align:center; margin-bottom:16px;">Ввод оплат</h3>

  <!-- ===== ПАНЕЛЬ ВВОДА: три поля одной строки =========================== -->
  <div class="inputs-row">
    <!-- Поле: Дата (браузерный ISO), в таблице показываем как dd.mm.yyyy -->
    <div class="form-col">
      <label for="pay_date">Дата</label>
      <input type="date" id="pay_date" placeholder="Выберите дату" />
    </div>

    <!-- Поле: Оплачено (число), допускаем запятую/точку -->
    <div class="form-col">
      <label for="pay_amount">Оплачено</label>
      <input type="number" id="pay_amount" inputmode="decimal" placeholder="Введите сумму оплаты" />
    </div>

    <!-- Поле: Комментарий (произвольный текст) -->
    <div class="form-col">
      <label for="pay_comment">Комментарий</label>
      <input type="text" id="pay_comment" placeholder="Комментарий к строке" />
    </div>
  </div>

  <!-- ===== КНОПКИ ДЕЙСТВИЙ =============================================== -->
  <div class="btns">
    <!-- Добавление строки -->
    <button class="btn" id="pay_add" type="button">Добавить в таблицу</button>

    <!-- Сортировка по дате (переключатель ↑/↓) -->
    <button class="btn" id="pay_sort" type="button" aria-pressed="true">Сортировка: по дате ↑</button>

    <!-- Очистить все строки -->
    <button class="btn btn-danger" id="pay_clear" type="button">Очистить таблицу</button>

    <!-- Кнопка «Данные»: выпадающее меню экспорта/импорта -->
    <div class="data-box">
      <button class="btn btn-data" id="pay_data_btn" type="button" aria-expanded="false">Данные ▾</button>

      <!-- Меню команд (data-cmd=...) -->
      <div class="data-menu" id="pay_data_menu" hidden>
        <button class="menu-item" data-cmd="export-excel" type="button">Выгрузить в Excel (CSV)</button>
        <button class="menu-item" data-cmd="import-excel" type="button">Загрузить из Excel (CSV)</button>

        <hr class="menu-sep" />

        <button class="menu-item" data-cmd="export-xml" type="button">Выгрузить в XML</button>
        <button class="menu-item" data-cmd="import-xml" type="button">Загрузить из XML</button>

        <hr class="menu-sep" />

        <button class="menu-item" data-cmd="export-text" type="button">Выгрузить в текст</button>
        <button class="menu-item" data-cmd="import-text" type="button">Загрузить из текста</button>
      </div>

      <!-- Скрытые file-инпуты для импорта -->
      <input type="file" id="pay_file_csv" accept=".csv,.tsv,text/csv,text/tab-separated-values" hidden />
      <input type="file" id="pay_file_xml" accept=".xml,text/xml" hidden />
      <input type="file" id="pay_file_txt" accept=".txt,.jsonl,.json,text/plain,application/json" hidden />
    </div>
  </div>

  <!-- ===== ТАБЛИЦА: thead/tbody/tfoot ==================================== -->
  <div class="table-wrap">
    <table id="pay_table" aria-label="Таблица оплат">
      <thead>
        <tr>
          <th style="width:56px;">№</th>
          <th id="pay_th_date" class="no-wrap" style="cursor:pointer;" title="Нажмите, чтобы переключить порядок по дате">Дата</th>
          <th style="width:200px;">Оплачено</th>
          <th class="no-wrap">Комментарий</th>
          <th style="width:280px;">Действия</th>
        </tr>
      </thead>
      <tbody></tbody>
      <tfoot>
        <tr>
          <td colspan="2" style="font-weight:700;">Итого</td>
          <td id="pay_sum" class="num">0,00</td>
          <td></td><td></td>
        </tr>
      </tfoot>
    </table>
  </div>
</div>
