<!-- =======================================================================
БЛОК: Ввод неустойки
Смысл и возможности:
  • Ввод одной строки: Дата, Неустойка (число с двумя знаками), Измерение (фиксированный список).
  • Таблица: автонумерация, inline-редактирование (включая изменение «Измерения»),
             дублирование строки на +1 календарный месяц, удаление.
  • Сортировка по дате (↑/↓), статус сортировки сохраняется после любых операций.
  • Подвал таблицы «Итого» — суммирует колонку «Неустойка» (как число).
  • Кнопка «Данные»: экспорт/импорт
        — Excel (CSV, UTF-8 + BOM, разделитель ;, дата dd.mm.yyyy),
        — XML (простой/безопасный),
        — Текст (JSON Lines).
Особенности:
  • Фон блока: #e5dcd0; аккуратные границы таблицы #bcae99; заголовок #efe6db.
  • Мобильные отступы слева/справа 14px; расширены колонки «Дата» и «Измерение».
  • Все теги валидны; логика в IIFE; уникальные селекторы (префикс pen_).
======================================================================= -->
<div class="elegso-pen" style="max-width:920px; margin:120px auto 100px auto; position:relative; z-index:5; background:#e5dcd0;" data-locale="ru-RU">
  <!-- ===== Заголовок блока =============================================== -->
  <h3 style="text-align:center; margin-bottom:16px;">Ввод неустойки</h3>

  <!-- ===== ПАНЕЛЬ ВВОДА: три поля одной строки =========================== -->
  <div class="inputs-row">
    <!-- Поле: Дата (браузерный ISO), в таблице показываем как dd.mm.yyyy -->
    <div class="form-col">
      <label for="pen_date">Дата</label>
      <input type="date" id="pen_date" placeholder="Выберите дату" />
    </div>

    <!-- Поле: Неустойка (число) — допускаем запятую/точку как разделитель -->
    <div class="form-col">
      <label for="pen_value">Неустойка</label>
      <input type="number" id="pen_value" inputmode="decimal" placeholder="Введите значение неустойки" />
    </div>

    <!-- Поле: Измерение — фиксированный список вариантов -->
    <div class="form-col">
      <label for="pen_measure">Измерение</label>
      <select id="pen_measure">
        <option value="% за каждый день">% за каждый день</option>
        <option value="% за каждый рабочий день">% за каждый рабочий день</option>
        <option value="% в год">% в год</option>
      </select>
    </div>
  </div>

  <!-- ===== КНОПКИ ДЕЙСТВИЙ =============================================== -->
  <div class="btns">
    <!-- Добавление строки из панели ввода -->
    <button class="btn" id="pen_add" type="button">Добавить в таблицу</button>

    <!-- Сортировка по дате (переключатель ↑/↓) -->
    <button class="btn" id="pen_sort" type="button" aria-pressed="true">Сортировка: по дате ↑</button>

    <!-- Очистить таблицу -->
    <button class="btn btn-danger" id="pen_clear" type="button">Очистить таблицу</button>

    <!-- Кнопка «Данные»: выпадающее меню экспорта/импорта -->
    <div class="data-box">
      <button class="btn btn-data" id="pen_data_btn" type="button" aria-expanded="false">Данные ▾</button>

      <!-- Меню команд (data-cmd=...) -->
      <div class="data-menu" id="pen_data_menu" hidden>
        <button class="menu-item" data-cmd="export-excel" type="button">Выгрузить в Excel (CSV)</button>
        <button class="menu-item" data-cmd="import-excel" type="button">Загрузить из Excel (CSV)</button>

        <hr class="menu-sep" />

        <button class="menu-item" data-cmd="export-xml" type="button">Выгрузить в XML</button>
        <button class="menu-item" data-cmd="import-xml" type="button">Загрузить из XML</button>

        <hr class="menu-sep" />

        <button class="menu-item" data-cmd="export-text" type="button">Выгрузить в текст</button>
        <button class="menu-item" data-cmd="import-text" type="button">Загрузить из текста</button>
      </div>

      <!-- Скрытые file-инпуты для импорта -->
      <input type="file" id="pen_file_csv" accept=".csv,.tsv,text/csv,text/tab-separated-values" hidden />
      <input type="file" id="pen_file_xml" accept=".xml,text/xml" hidden />
      <input type="file" id="pen_file_txt" accept=".txt,.jsonl,.json,text/plain,application/json" hidden />
    </div>
  </div>

  <!-- ===== ТАБЛИЦА: thead/tbody/tfoot ==================================== -->
  <div class="table-wrap">
    <table id="pen_table" aria-label="Таблица неустоек">
      <thead>
        <tr>
          <th style="width:56px;">№</th>
          <th id="pen_th_date" class="no-wrap" style="cursor:pointer;" title="Нажмите, чтобы переключить порядок по дате">Дата</th>
          <th style="width:200px;">Неустойка</th>
          <th class="no-wrap" style="width:240px;">Измерение</th>
          <th style="width:300px;">Действия</th>
        </tr>
      </thead>
      <tbody></tbody>
      <tfoot>
        <tr>
          <td colspan="2" style="font-weight:700;">Итого</td>
          <td id="pen_sum" class="num">0,00</td>
          <td></td><td></td>
        </tr>
      </tfoot>
    </table>
  </div>
</div>
